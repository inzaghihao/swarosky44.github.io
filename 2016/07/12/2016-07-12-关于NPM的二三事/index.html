<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>Engineer | Listen</title>
  <meta name="description" content="{{theme.description}}" />
  <meta name="keywords" content="{{theme.keywords}}" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="关于 NPM 的二三事
梗概NPM 是 NodeJs 的包管理工具，Node的大火很多一部分原因是 NPM 的优秀。不同于 homebrew 、rubygems 等其他全局包管理工具，NPM 是将包安装到本地默认目录之中，所以在不同项目中可以使用同一个包的不同版本。

NPM 的安装机制
npm install &amp;lt;packageName&amp;gt;

该命令用于将制定包安装到 node_modu">
<meta property="og:type" content="article">
<meta property="og:title" content="Engineer | Listen">
<meta property="og:url" content="http://yoursite.com/2016/07/12/2016-07-12-关于NPM的二三事/index.html">
<meta property="og:site_name" content="Engineer | Listen">
<meta property="og:description" content="关于 NPM 的二三事
梗概NPM 是 NodeJs 的包管理工具，Node的大火很多一部分原因是 NPM 的优秀。不同于 homebrew 、rubygems 等其他全局包管理工具，NPM 是将包安装到本地默认目录之中，所以在不同项目中可以使用同一个包的不同版本。

NPM 的安装机制
npm install &amp;lt;packageName&amp;gt;

该命令用于将制定包安装到 node_modu">
<meta property="og:updated_time" content="2016-07-12T11:49:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Engineer | Listen">
<meta name="twitter:description" content="关于 NPM 的二三事
梗概NPM 是 NodeJs 的包管理工具，Node的大火很多一部分原因是 NPM 的优秀。不同于 homebrew 、rubygems 等其他全局包管理工具，NPM 是将包安装到本地默认目录之中，所以在不同项目中可以使用同一个包的不同版本。

NPM 的安装机制
npm install &amp;lt;packageName&amp;gt;

该命令用于将制定包安装到 node_modu">
  
  
    <link rel="icon" href="/favicon.png">
  
  
	<script src="https://use.typekit.net/eyf3hir.js"></script>
  <script>try{Typekit.load({ async: false });}catch(e){}</script>
  <link rel="stylesheet" href="/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
</head>

<body>
  
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>

  <script>setLoadingBarProgress(20)</script>
  
  <div id="site-wrapper">
    
    <header id="header">
	<div id="header-wrapper" class="clearfix">
		<a id="logo" href="/">
			<img src="/images/logo.png" />
			<span id="site-desc">
			  otaku keeps alive
      </span>
		</a>
		<button id="site-nav-switch">
	    <span class="icon icon-menu"></span>
	  </button>
	</div>
	<aside id="site-menu">
  	<nav>
  		
        <a href="/" class="nav-home nav">
          Home
        </a>
      
        <a href="/about" class="nav-about nav">
          About
        </a>
      
        <a href="/archives" class="nav-archives nav">
          Archives
        </a>
      
    </nav>
	</aside>
</header>
    <script>setLoadingBarProgress(40);</script>
    
    <main id="main" role="main">
      <article id="post-2016-07-12-关于NPM的二三事"
  class="post article white-box article-type-post"
  itemscope itemprop="blogPost">
	<h2 class="title">
  	<a href="/2016/07/12/2016-07-12-关于NPM的二三事/">
    	
    </a>
  </h2>
	<time>
	  7月 12, 2016
	</time>
	<section class="content">
  	<div class="article-entry" itemprop="articleBody">
    	<h1 id="关于-NPM-的二三事"><a href="#关于-NPM-的二三事" class="headerlink" title="关于 NPM 的二三事"></a>关于 NPM 的二三事</h1><hr>
<h2 id="梗概"><a href="#梗概" class="headerlink" title="梗概"></a>梗概</h2><p><code>NPM</code> 是 <code>NodeJs</code> 的包管理工具，<code>Node</code>的大火很多一部分原因是 <code>NPM</code> 的优秀。不同于 <code>homebrew 、rubygems</code> 等其他全局包管理工具，<code>NPM</code> 是将包安装到本地默认目录之中，所以在不同项目中可以使用同一个包的不同版本。</p>
<hr>
<h2 id="NPM-的安装机制"><a href="#NPM-的安装机制" class="headerlink" title="NPM 的安装机制"></a>NPM 的安装机制</h2><ul>
<li><code>npm install &lt;packageName&gt;</code></li>
</ul>
<p>该命令用于将制定包安装到 <code>node_modules</code> 之中，如果已经安装过的包将不会再次安装，即使目前 <code>node_modules</code> 中的版本已经落后于远程仓库。如果想更新新版本的包，应使用 <code>npm update &lt;packageName&gt;</code></p>
<ul>
<li><code>npm view &lt;packageName&gt;</code></li>
</ul>
<p>不论是 <code>npm install</code> 或者 <code>npm update</code> 都是需要先查询远程仓库中该包的版本。如果只想查询某个包的作者信息或者包版本以及其他信息可以通过 <code>npm view</code> 来查询得到。命令行效果是等同于直接输入 <code>https://registry/npmjs.org/</code> 。两者都会返回一个 <code>JSON</code> 对象给我们。</p>
<ul>
<li><code>npm  config get cache</code></li>
</ul>
<p>这个命令是用于查询 <code>npm</code> 在本地的缓存目录。浏览一下该目录可以得到 当前环境下所有版本所有包的相关信息以及其压缩包。<br>至此可以看到 <code>npm</code> 安装一个新的包是遵循以下流程：</p>
<ol>
<li><p>发出 <code>npm install</code> 的命令</p>
</li>
<li><p>向 <code>registry</code> 提供的查询服务查询压缩包的下载地址</p>
</li>
<li><p>下载压缩包至本地环境的缓存 <code>~/.npm</code> 中</p>
</li>
<li><p>解压缩当前的包至本地项目的 <code>node_modules</code> 之中</p>
</li>
</ol>
<hr>
<h2 id="package-json-文件"><a href="#package-json-文件" class="headerlink" title="package.json 文件"></a>package.json 文件</h2><p>在每个项目下都有这样一个根文件叫 <code>package.json</code> 。这个文件囊括了当前目录下项目的基本信息、脚本命令以及依赖信息。<code>npm install</code> 也是从这里提取当前项目中的依赖包然后才会去下载。如尾缀就可以知道这是文件是一个 json 格式的文件，里面每项属性都代表了一段信息。如下：</p>
<ul>
<li>name</li>
</ul>
<p>当前项目的名称</p>
<ul>
<li>version</li>
</ul>
<p>当前项目的版本号</p>
<ul>
<li>scripts</li>
</ul>
<p>当前项目脚本命令的简写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">    &quot;dev&quot;: &quot;node build/dev-server.js&quot;,</div><div class="line">    &quot;build&quot;: &quot;node build/build.js&quot;,</div><div class="line">    &quot;test&quot;: &quot;&quot;,</div><div class="line">    &quot;lint&quot;: &quot;eslint --ext .js,.vue src test/unit/specs test/e2e/specs&quot;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>这是一段 scripts 的属性，<code>npm run dev</code> 就会执行相对应的脚本命令，启动一个 node 服务，运行指定路径的 js 文件。</p>
<ul>
<li>dependencies &amp; devDependencies</li>
</ul>
<p>dependencies 指定项目运行依赖的模块<br>devDependencies 指定项目开发依赖的模块<br>所以相对而言更为必须的包应该选择 <code>--save</code> 安装<br>在这两个属性中选择安装包的版本号有以下几种特定字符：</p>
<ol>
<li><p>1.2.2 指定版本号安装</p>
</li>
<li><p>~1.2.2 指定大版本和次要版本，表示会安装 1.2.x中最新版</p>
</li>
<li><p>^1.2.2 制定大版本，表示会安装1.x.x 中最新版</p>
</li>
<li><p><code>latest</code> 安装最新版本 </p>
</li>
</ol>
<ul>
<li>bin</li>
</ul>
<p>指定项目可执行 js 文件的短路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    &quot;scripts&quot;: &#123;</div><div class="line">        &quot;start&quot;: &quot; someTool build &quot;</div><div class="line">    &#125;,</div><div class="line">    ...</div><div class="line">    &quot;bin&quot;: &#123;</div><div class="line">        &quot;someTool&quot;: &quot;./bin/someTool.js&quot;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">``` </div><div class="line"></div><div class="line">- config</div><div class="line"></div><div class="line">向环境变量输出指定值</div></pre></td></tr></table></figure>
<p>{<br>    “name”: “foo”,<br>    “config”: { “port”: “8080” }<br>}<br>process.env.npm_package_config_port // 8080<br>命令行中可以修改config中指定的值<br>npm config set foo:port 8000<br>```</p>
<hr>
<blockquote>
<p>《npm 模块安装机制简介》</p>
<p>《JavaScript 标准参考教程 - package.json文件》</p>
</blockquote>

  	</div>
	  
	  <div class="article-tags tags">
		  
	  </div>
	</section>
</article>



      <script>setLoadingBarProgress(60);</script>
    </main>
    
    <footer id="footer" class="clearfix">
  
  
	<div class="search">
	  <form name="searchform" id="searchform" class="u-search-form">
	    <input type="text" id="searchinput" class="u-search-input" placeholder="Looking for something?" />
	    <button type="submit" id="u-search-btn-submit" class="u-search-btn-submit">
	      <span class="icon icon-search"></span>
	    </button>
	  </form>
	</div>
	

	<div class="social-wrapper">
  	
      
        <a href="https://github.com/artchen" class="social github"
          target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
      
        <a href="https://twitter.com/otakism" class="social twitter"
          target="_blank" rel="external">
          <span class="icon icon-twitter"></span>
        </a>
      
        <a href="/atom.xml" class="social rss"
          target="_blank" rel="external">
          <span class="icon icon-rss"></span>
        </a>
      
        <a href="https://plus.google.com/+ArtChenOtakism/posts" class="social google"
          target="_blank" rel="external">
          <span class="icon icon-google"></span>
        </a>
      
        <a href="http://weibo.com/otakism/" class="social sina-weibo"
          target="_blank" rel="external">
          <span class="icon icon-sina-weibo"></span>
        </a>
      
    
  </div>
  
  <div>Theme <span class="codename">Typescript</span> designed by <a href="http://rakugaki.me/" target="_blank">Art Chen</a>.</div>
  <div>&copy; <a href="/">Engineer | Listen</a></div>
  
</footer>


    <script>setLoadingBarProgress(80);</script>
    
  </div>

  
  

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery.min.js"><\/script>')</script>

<script src="/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "google";
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>


  <script>setLoadingBarProgress(100);</script>
  
</body>
</html>
