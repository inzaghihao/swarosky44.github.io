<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="翻译一篇 webpack 相关的文章: 
Webpack - The Confusing Parts">
<meta property="og:type" content="article">
<meta property="og:title" content="Listen">
<meta property="og:url" content="http://yoursite.com/2017/01/08/翻译 Webpack - The Confusing Parts/index.html">
<meta property="og:site_name" content="Listen">
<meta property="og:description" content="翻译一篇 webpack 相关的文章: 
Webpack - The Confusing Parts">
<meta property="og:image" content="http://7xro5v.com1.z0.glb.clouddn.com/webpack1.png">
<meta property="og:updated_time" content="2017-01-24T12:52:19.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Listen">
<meta name="twitter:description" content="翻译一篇 webpack 相关的文章: 
Webpack - The Confusing Parts">
<meta name="twitter:image" content="http://7xro5v.com1.z0.glb.clouddn.com/webpack1.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2017/01/08/翻译 Webpack - The Confusing Parts/"/>

  <title>  | Listen </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Listen</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">wanner be a great Font-End Engineer</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-08T17:29:08+08:00" content="2017-01-08">
              2017-01-08
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>翻译一篇 webpack 相关的文章: </p>
<p>Webpack - The Confusing Parts</p>
<a id="more"></a>
<h2 id="Webpack-令人困惑的地方"><a href="#Webpack-令人困惑的地方" class="headerlink" title="Webpack - 令人困惑的地方"></a>Webpack - 令人困惑的地方</h2><p>Webpack 是目前最主要的用于打包 React &amp; Redux Apps 的构建工具。我认为目前对于那些使用 ng2 或者其他框架的开发人员们也在大量使用 Webpack 这个工具。</p>
<p>当我第一次看到一份 Wepack 的配置文件，我认为它看起来就像是外星人的语言，并且让人感到十分的困惑。在我使用它一段时间之后，我现在认为造成我最初困惑的主要原因是 Webpack 独一无二的语法 &amp; 一些新潮的理念。顺带一说，这些新潮的理念也正是它得以流行起来的原因。</p>
<p>正是因为初学它会感到困惑，我想我应该写几篇文章希望让其他人能够在初学 Webpack 的时候感到轻松，使用上它强大的特性。下面是第一章节。</p>
<h3 id="Webpack-的核心理念"><a href="#Webpack-的核心理念" class="headerlink" title="Webpack 的核心理念"></a>Webpack 的核心理念</h3><p>Webpack 有两个核心理念：</p>
<ol>
<li><p>所有事物都是模块化的 - 就好像 JS 文件可以被称为模块一样，每个事物都可以被称为模块（CSS, Image, HTML）。比如，你可以写</p>
 <figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">'myJSfile.js'</span>);</div><div class="line"><span class="built_in">require</span>(<span class="string">'myCSSfile.css'</span>);</div></pre></td></tr></table></figure>
<p> 这意味着，我们可以分割各个文件成更小的易处理的模块，反复复用它们。</p>
</li>
<li><p>只当你需要时才加载你所需要的 - 典型的打包工具把所有的模块打包在一起，并输出一个非常庞大的叫做 <code>bundle.js</code> 的文件。但是在现实生活中许多应用打包后的 <code>bundle.js</code> 大概有 10M - 15M 左右的大小，那足够我们的网站加载一辈子了! 😆 因此 Webpack 有许多特性是用于分割代码，产生多个 <code>bundle.js</code> 文件，并且也可以异步的加载应用的不同模块，因此你能够在你真的需要时才加载到你所需要的模块。</p>
</li>
</ol>
<p>那么现在，我们看一下 Webapck 中那些让我们感到困惑的部分啦</p>
<h3 id="开发环境-VS-生产环境"><a href="#开发环境-VS-生产环境" class="headerlink" title="开发环境 VS 生产环境"></a>开发环境 VS 生产环境</h3><p>首先我们必须要了解到的 Webpack 有许多种类的特性。一些是开发环境专有的，一些是生产环境专有的，一些是开发环境和生产环境共有的。</p>
<blockquote>
<p>提示：图片可以点击放大查看。</p>
</blockquote>
<p><img src="http://7xro5v.com1.z0.glb.clouddn.com/webpack1.png" alt=""></p>
<blockquote>
<p>通常大多数的项目都会使用如此多的特性，因为他们会配置两份大型的 Webpack 文件。</p>
</blockquote>
<p>然后为了打包文件，你将会在 <code>package.json</code> 文件中写下两行命令：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="string">"scripts"</span>: &#123;</div><div class="line">  // npm <span class="keyword">run</span><span class="bash"> build 用于打包生产环境的代码</span></div><div class="line">  <span class="string">"build"</span>: <span class="string">"webpack --config webpack.config.prod.js"</span>,</div><div class="line">  </div><div class="line">  // npm <span class="keyword">run</span><span class="bash"> dev 用于打包开发环境代码 &amp; 运行本地服务</span></div><div class="line">  <span class="string">"dev"</span>: <span class="string">"webpack-dev-server"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Webpack-CLI-VS-Webpack-dev-server"><a href="#Webpack-CLI-VS-Webpack-dev-server" class="headerlink" title="Webpack CLI VS Webpack-dev-server"></a>Webpack CLI VS Webpack-dev-server</h3><p>关于模块化打包工具 Webpack 必须要提到的是，它提供了两个接口：</p>
<ol>
<li><p>Webpack CLI 工具 - 默认的接口（作为 Webpack 自身的一部分安装）</p>
</li>
<li><p>webpack-dev-server 工具 - 一个 Node 的服务（我们需要单独安装）</p>
</li>
</ol>
<h4 id="Webpack-Cli-适合用于生产环境的构建"><a href="#Webpack-Cli-适合用于生产环境的构建" class="headerlink" title="Webpack Cli (适合用于生产环境的构建)"></a>Webpack Cli (适合用于生产环境的构建)</h4><p>这个工具可以通过命令行 或者 通过一份配置文件（默认名字是 webpack.config.js）设置配置项给 webpack 提供打包规则。</p>
<blockquote>
<p>当我们短暂接触用 CLI 来构建 webpack 之后，我们大部分人可能都是用它来构建产品的基础</p>
</blockquote>
<p>用法：</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">第一步：</div><div class="line"></div><div class="line"><span class="comment">// 全局安装一下 webpack</span></div><div class="line">npm install webpack --g</div><div class="line"></div><div class="line"><span class="comment">// 终端使用</span></div><div class="line">webpack <span class="comment">// &lt;-- 打包构建需要 webpack.config.prod.js</span></div><div class="line"></div><div class="line">第二部：</div><div class="line"></div><div class="line"><span class="comment">// 在项目本地安装 webpack &amp; 并在 package.json 中声明依赖</span></div><div class="line">npm install webpack --<span class="keyword">save</span></div><div class="line"></div><div class="line"><span class="comment">// 在 package.json 温江中添加如下脚本命令</span></div><div class="line"><span class="string">"scripts"</span>: &#123;</div><div class="line">	<span class="string">"build"</span>: <span class="string">"webpack --config webpack.config.prod.js -p"</span></div><div class="line">	...</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 运行脚本</span></div><div class="line">npm <span class="keyword">run</span> build</div></pre></td></tr></table></figure>
<h4 id="Webpack-dev-server（适合用于构建开发环境）"><a href="#Webpack-dev-server（适合用于构建开发环境）" class="headerlink" title="Webpack-dev-server（适合用于构建开发环境）"></a>Webpack-dev-server（适合用于构建开发环境）</h4><p>它是一个运行在 8080 端口上的 express 架构的 node 服务。这个服务的核心就是 Webpack。它所提供的好处在于它有一些额外的能力，比如实时刷新（Live Reloading）浏览器以及只刷新已改变了的模块（热加载）。</p>
<p>用法：</p>
<figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">第一步：</div><div class="line"></div><div class="line"><span class="comment">// 在本地安装</span></div><div class="line">npm install webpack-<span class="built_in">dev</span>-server --<span class="built_in">save</span></div><div class="line"></div><div class="line"><span class="comment">// 终端使用</span></div><div class="line">webpack-<span class="built_in">dev</span>-server --inline --hot</div><div class="line"></div><div class="line">第二步：</div><div class="line"></div><div class="line"><span class="comment">// package.json 文件中添加脚本</span></div><div class="line"><span class="string">"scripts"</span>: &#123;</div><div class="line">	<span class="string">"start"</span>: <span class="string">"webpack-dev-server --inline --hot"</span>,</div><div class="line">	...</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 运行脚本</span></div><div class="line">npm start</div><div class="line"></div><div class="line"><span class="comment">// 在浏览器中打开如下 url</span></div><div class="line">http:<span class="comment">//localhost:8080</span></div></pre></td></tr></table></figure>
<h4 id="Webpack-Vs-webpack-dev-server-配置"><a href="#Webpack-Vs-webpack-dev-server-配置" class="headerlink" title="Webpack Vs webpack-dev-server 配置"></a>Webpack Vs webpack-dev-server 配置</h4><p>这里有一些值得注意的配置命令：”inline” &amp; “hot” 是 webpack-dev-server 独有的配置命令。CLI 也有一些独有的配置命令，比如 “hide-modules”。</p>
<h4 id="webpack-dev-server-CLI-配置-Vs-config-配置"><a href="#webpack-dev-server-CLI-配置-Vs-config-配置" class="headerlink" title="webpack-dev-server CLI 配置 Vs config 配置"></a>webpack-dev-server CLI 配置 Vs config 配置</h4><p>另外值得一提的是向 webpack-dev-server 提供配置规则的方式有两种：</p>
<ol>
<li><p>通过 webpack.config.js 中的 devServer 对象</p>
</li>
<li><p>通过命令行配置</p>
</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 通过命令行</span></div><div class="line">webpack-dev-server --hot --<span class="keyword">inline</span></div><div class="line"></div><div class="line"><span class="comment">// 通过 webpack.config.js</span></div><div class="line">devServer: &#123;</div><div class="line">  <span class="keyword">inline</span>: <span class="literal">true</span>,</div><div class="line">  hot: <span class="literal">true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>我发现有时候通过 config 配置 <code>devServer (hot: true, inline: true)</code> 并不起作用！因此我更加喜欢通过在 package.json 配置命令行：</p>
</blockquote>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// package.json</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"scripts"</span>: <span class="string">"webpack-dev-server --hot --inline"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>谨记：不要在 <code>devServer</code> 中配置 <code>hot: true</code> 同时也在命令行中写 <code>--hot</code></p>
</blockquote>
<h4 id="webpack-dev-server-中的配置-“hot”-Vs-“inline”"><a href="#webpack-dev-server-中的配置-“hot”-Vs-“inline”" class="headerlink" title="webpack-dev-server 中的配置 “hot” Vs “inline”"></a>webpack-dev-server 中的配置 “hot” Vs “inline”</h4><p>配置 “inline” 可以启用整个页面的实时刷新功能。配置 “hot” 可以启用热加载功能用于只重新加载已经变化了的模块（而不再是整个页面的实时刷新）。</p>
<p>如果我们同时配置了 <code>inline</code> &amp; <code>hot</code> 两项，当源码改变后，webpack-dev-server 会首先尝试热加载，假如热加载失效了，才会尝试整个页面的重新刷新。</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 当源码改变时，以下三项配置会生成新的打包，但是 ...</span></div><div class="line"></div><div class="line"><span class="comment">// 它不会刷新页面</span></div><div class="line">webpack-dev-<span class="keyword">server</span></div><div class="line"></div><div class="line"><span class="comment">// 重新加载整个页面</span></div><div class="line">webpack-dev-<span class="keyword">server</span> --inline</div><div class="line"></div><div class="line"><span class="comment">// 仅重新加载热更新后的模块，如果失效则重新加载整个页面</span></div><div class="line">webpakc-dev-<span class="keyword">server</span> --inline --hot</div></pre></td></tr></table></figure>
<h3 id="“entry”-String-Vs-Array-Vs-Object"><a href="#“entry”-String-Vs-Array-Vs-Object" class="headerlink" title="“entry” - String Vs Array Vs Object"></a>“entry” - String Vs Array Vs Object</h3><p><code>Entry</code> 用于告诉 Webpack 根模块在哪或者整个项目的起点在哪。它的配置可以是字符串或者数组或者对象。这可能会让你感到有点迷茫，但是我们得明确不同的数据类型用于不同的目的。</p>
<p>如果你只是单页应用的话（和大部分 app 一样），那你可以使用任意的数据类型并且最终的结果是一致的。</p>
<h4 id="entry-Array"><a href="#entry-Array" class="headerlink" title="entry - Array"></a>entry - Array</h4><p>但是，如果你想添加多个文件作为入口并且他们之间不互相依赖，那么你可以使用数组的形式。</p>
<p>比如：可能在你的 HTML 文件中需要引入 “googleAnalytics.js”。你可以告诉 webpack 将它放到<code>bundle.js</code> 的后面，如下：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	// 生成一份打包文件 <span class="built_in">index</span>.js 并且在将 googleAnalytics.js 放到后面</div><div class="line">	entry: [<span class="string">'./public/src/index.js'</span>, <span class="string">'./public/src/googleAnalytics.js'</span>],</div><div class="line">	outpu<span class="variable">t:</span> &#123;</div><div class="line">		path: <span class="string">'/dist'</span>,</div><div class="line">		filename: <span class="string">"bundle.js"</span></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">``` </div><div class="line"></div><div class="line">#### entry - object</div><div class="line"></div><div class="line">现在，如果你需要做一个多页应用，而不是单页多视图应用。所以你有多个 HTML 文件（<span class="built_in">index</span>.html &amp; <span class="keyword">profile</span>.html），你可以告诉 webpack 通过 `entry` 的 `object` 属性，一次生成多个打包文件。</div><div class="line"></div><div class="line">下面的配置会生成两份 JS 文件：indexEntry.js 和 profileEntry.js 那么我们可以用在各自的 HTML 文件中 - <span class="built_in">index</span>.html &amp; <span class="keyword">profile</span>.html</div></pre></td></tr></table></figure>
<p>{<br>    entry: {<br>        “indexEntry”: ‘./public/src/index.js’,<br>        “profileEntry”: ‘./public/src/profile.js’<br>    },<br>    output: {<br>        path: ‘/dist’,<br>        filename: ‘[name].js’<br>    }<br>}<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">用法：</div></pre></td></tr></table></figure></p>
<p>// profile.html</p>
<script src="dist/profileEntry.js"></script>

<p>// index.html</p>
<p><script src="dist/indexEntry.js"></script><br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&gt; 提示：文件名来自于 `entry` 对象的键值</div><div class="line"></div><div class="line">#### entry - combination</div><div class="line"></div><div class="line">我们也可以在 `entry` 的对象形式中使用数组，比如：下面的配置将会生成 <span class="number">3</span> 份文件：vendor.js 包含三份 vendor 文件、index.js &amp; profile.js</div></pre></td></tr></table></figure></p>
<p>{<br>    entry: {<br>        “vendor”: [‘jquery’, ‘analytics.js’, ‘optimizely.js’],<br>        “index”: ‘./public/src/index.js’,<br>        “profile”: ‘./public/src/profile.js’<br>    },<br>    output: {<br>        path: ‘/dist’,<br>        filename: “[name].js”<br>    }<br>}<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### output - <span class="string">"path"</span> Vs <span class="string">"publicPath"</span></div><div class="line"></div><div class="line"><span class="string">`output`</span> 告诉 webpack 在哪里、如何保存生成的文件。它有两个属性可能会造成我们的迷惑 - <span class="string">"path"</span> &amp; <span class="string">"publicPath"</span></div><div class="line"></div><div class="line"><span class="string">"path"</span> 仅仅是用来告诉 webpack 去哪里保存文件。而 <span class="string">"publicPath"</span> 用来在生产环境下打包文件时给几个 webpack 插件更新 css 、html 文件中的 urls 的。</div><div class="line"></div><div class="line">![](http:<span class="comment">//7xro5v.com1.z0.glb.clouddn.com/path.png)</span></div><div class="line"></div><div class="line">例如：在我们的 CSS 文件中，我们可能在本地环境下有一个图片的路径是 <span class="string">'./test.png'</span>。但是，在生产环境下，如果我们的 node 服务是运行在 Heroku 的服务器下，那么我们的 test.png 图片则可能是需要通过一些 CDN 服务来加载，这就意味着我们每次更新生产环境的时候不得不手动去更新所有文件中的 urls 为 CDN 的地址。</div><div class="line"></div><div class="line">相反，如果我们能够采用 webpack 的 <span class="string">`publicPath`</span> 和一些插件（publicPath-aware），那么当我们在生产环境打包文件就能够自动的更新 urls。</div><div class="line"></div><div class="line">![](http:<span class="comment">//7xro5v.com1.z0.glb.clouddn.com/pathDetail.png)</span></div></pre></td></tr></table></figure></p>
<p>// 开发环境：服务和图片都在本地<br>.image {<br>    background-image: url(‘./test.png’)<br>}</p>
<p>// 生产环境：服务在 heroku 而图片在 CDN<br>.image {<br>    background-image: url(‘<a href="https://xxxcdn/test.png" target="_blank" rel="external">https://xxxcdn/test.png</a>‘)<br>}<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### 加载器 &amp; 加载器链条</div><div class="line"></div><div class="line">Loaders 是额外的一些 node 依赖用于帮助浏览器加载或者引入各式各样的文件（比如 CSS 或者 JS 文件等等）。还有一些 loaders 会允许我们使用 `require` 或者 es6 的 `import` 来加载各种文件到 JS 之中。</div><div class="line"></div><div class="line">例如：我们可以使用 `babel-loader` 可以将 es6 语法的 JS 转换成浏览器支持的 es5 语法。</div></pre></td></tr></table></figure></p>
<p>module: {<br>    loaders: [{<br>        test: /.js$/, // &lt;- 尝试解析 .js 文件，成功则使用这个加载器<br>        exclude: /node_modules/, // &lt;- 除去 node_modules 中的文件<br>        loader: ‘babel’ // &lt;- 使用 babel 来解析（babel-loader 的缩写）<br>    }]<br>}<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#### 加载器链条</span></div><div class="line"></div><div class="line">各种各样的加载器可以组成链条用来处理同一类型的文件。这个链条的工作方式是从右向左并且通过 <span class="string">"!"</span> 来分隔。</div><div class="line"></div><div class="line">例如：我们有一份名为 <span class="string">"myCssFile.css"</span> 的文件并且我们想将这份文件中的内容变成 html 的内联形式。我们可以通过使用两个加载器来完成这个工作：css-loader &amp; style-loader。</div></pre></td></tr></table></figure></p>
<p>module: {<br>    loaders: [{<br>        test: /.css$/,<br>        loader: ‘style!css’ // &lt;- style-loader!css-loader 的缩写<br>    }]<br>}<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">下图是工作流程：</div><div class="line"></div><div class="line">!<span class="selector-attr">[]</span>(<span class="attribute">http</span>:<span class="comment">//7xro5v.com1.z0.glb.clouddn.com/chainloaders.png)</span></div><div class="line"></div><div class="line"><span class="number">1</span>. webpack 搜索模块中对 css 的依赖，通过在 js 文件中查找是否有声明 <span class="built_in">`require(myCssFile.css)`</span>。如果有，就将文件交给 css-loader 处理。</div><div class="line"></div><div class="line"><span class="number">2</span>. css-loader 加载器将所有的 css 代码以及 css 文件的依赖（通过 <span class="variable">@import</span> 引入）变成 JSON 格式。webpack 再将处理结果交由 style-loader 继续处理。</div><div class="line"></div><div class="line"><span class="number">3</span>. style-loader 获取 JSON 内容并添加到一个 style 标签里，然后再插入到 html 文件内容中。</div><div class="line"></div><div class="line">### 加载器本身是可以配置的</div><div class="line"></div><div class="line">loaders 本身可以通过配不同的参数来工作。</div><div class="line"></div><div class="line">在下面的案例中，我们可以配置 url-loader 将 小于 <span class="number">1024</span> 字节的图片用 DataURLS 来处理，而大于 <span class="number">1024</span> 字节的图片用 URL 来处理。我们可以通过一下两种方式传递参数 <span class="built_in">`limit`</span> ：</div></pre></td></tr></table></figure></p>
<p>{<br>    test: /.png$/,<br>    loader: “url-loader?limit=1024”<br>},<br>{<br>    test: /.png$/,<br>    loader: “url-loader”,<br>    query: {<br>        limit: 1024<br>    }<br>}<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">### .babelrc 文件</div><div class="line"></div><div class="line">babel-loader 使用 `presets` 配置来知道如何将 es6 转化成 es5，也可以配置知道如何将 React 的 JSX 如何转换成 JS。我们可以像下面这样配置 `query` 参数：</div></pre></td></tr></table></figure></p>
<p>module: {<br>    loaders: [<br>        {<br>            test: /.jsx?$/,<br>            exclude: /(node_modules|bower_components))/,<br>            loader: ‘babel’,<br>            query: {<br>                presets: [‘react’, ‘es2015’]<br>            }<br>        }<br>    ]<br>}<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">尽管如此，在许多项目中的 `babel` 配置可能会变得非常庞大。因此我们可以用一份 babel-loader 配置文件 `.babelrc` 来取代，如果 `.babelrc` 文件存在的话会被自动读取。</div><div class="line"></div><div class="line"><span class="symbol">eg:</span></div></pre></td></tr></table></figure></p>
<p>// webpack.config.js<br>module: {<br>    loaders: [<br>        {<br>            test: /.jsx?$/,<br>            exclude: /(node_modules|bower_components)/,<br>            loader: ‘babel’<br>        }<br>    ]<br>}</p>
<p>// .babelrc<br>{<br>    “presets”: [‘react’, ‘es2015’]<br>}<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">### 插件</span></div><div class="line"></div><div class="line">插件是额外的 <span class="keyword">node</span> <span class="title">功能模块用于帮助打包文件的。</span></div><div class="line"></div><div class="line">例如：uglifyJSPlugin 用于帮助 bundle.js 最小化并且混淆文件内容以减小文件的大小。</div><div class="line"></div><div class="line">同样的，extract-text-webpack-plugin 在内部使用 css-loader &amp; style-loader 将所有的 css 文件打包到一起并将最终所有内容放入一个单独的 style.css 文件中，将 style.css 文件的链接地址放到 index.html 中。</div></pre></td></tr></table></figure></p>
<p>// webpack.config.js<br>// 将所有 .css 文件合并内容到 style.css 文件中</p>
<p>var ETP = require(‘extract-text-webpack-plugin’)</p>
<p>module: {<br>    loaders: [<br>        {<br>            test: /.css$/,<br>            loader: ETP.extract(‘style-loader’, ‘css-loader’)<br>        }<br>    ]<br>},</p>
<p>plugins: [<br>    new ExtractTextPlugin(‘style.css’)<br>]<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; 如果我们想要的是内联 css 到 <span class="selector-tag">html</span> 文件中，我们可以不需要使用 extract-text-webpack-plugin，只需要向下面这样配置 CSS 和 Style 的 loaders：</div></pre></td></tr></table></figure></p>
<p>module: {<br>    loaders: [{<br>        test: /.css$/,<br>        loader: ‘style!css’<br>    }]<br>}<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">### 加载器 Vs 插件</span></div><div class="line"></div><div class="line">可能我已经意识到了，loaders 是作用于打包文件之前或者之后，针对单个文件层面工作。</div><div class="line"></div><div class="line">而插件更多作用于打包文件结束后。有一些插件（commonsChunksPlugins）更进一步，用于修改如何创建 bundle 文件的本身。</div><div class="line"></div><div class="line">### 处理文件的尾缀</div><div class="line"></div><div class="line">许多 webpack 的配置文件都一个用于处理尾缀的属性，就像下例所示有一个空字符串。这个空的字符串用于帮助导入那么那么些没有尾缀的（`<span class="javascript"><span class="built_in">require</span>(<span class="string">"./myJSFile"</span>)</span>` 或者 `<span class="javascript"><span class="keyword">import</span> myJSFile <span class="keyword">from</span> <span class="string">'./myJSFile'</span></span>`）文件。</div></pre></td></tr></table></figure></p>
<p>{<br>    resolve: {<br>        extensions: [‘’, ‘.js’, ‘.jsx’]<br>    }<br>}<br>```</p>
<hr>
<p>以上就是全部啦~ </p>
<p>翻译了一晚上 累啊</p>
<p>本文源自 - <a href="https://medium.com/@rajaraodv/webpack-the-confusing-parts-58712f8fcad9#.2yuyxvbsn" target="_blank" rel="external">rajaraov：Webpack - The Confusing Parts</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/01/01/2016 & 2017/" rel="next" title="2016 & 2017">
                <i class="fa fa-chevron-left"></i> 2016 & 2017
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://oe3rjg2g6.bkt.clouddn.com/yaluji.png"
               alt="listen" />
          <p class="site-author-name" itemprop="name">listen</p>
          <p class="site-description motion-element" itemprop="description">Font-End Engineer</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">19</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/swarosky44" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Webpack-令人困惑的地方"><span class="nav-number">1.</span> <span class="nav-text">Webpack - 令人困惑的地方</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Webpack-的核心理念"><span class="nav-number">1.1.</span> <span class="nav-text">Webpack 的核心理念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#开发环境-VS-生产环境"><span class="nav-number">1.2.</span> <span class="nav-text">开发环境 VS 生产环境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Webpack-CLI-VS-Webpack-dev-server"><span class="nav-number">1.3.</span> <span class="nav-text">Webpack CLI VS Webpack-dev-server</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Webpack-Cli-适合用于生产环境的构建"><span class="nav-number">1.3.1.</span> <span class="nav-text">Webpack Cli (适合用于生产环境的构建)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Webpack-dev-server（适合用于构建开发环境）"><span class="nav-number">1.3.2.</span> <span class="nav-text">Webpack-dev-server（适合用于构建开发环境）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Webpack-Vs-webpack-dev-server-配置"><span class="nav-number">1.3.3.</span> <span class="nav-text">Webpack Vs webpack-dev-server 配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#webpack-dev-server-CLI-配置-Vs-config-配置"><span class="nav-number">1.3.4.</span> <span class="nav-text">webpack-dev-server CLI 配置 Vs config 配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#webpack-dev-server-中的配置-“hot”-Vs-“inline”"><span class="nav-number">1.3.5.</span> <span class="nav-text">webpack-dev-server 中的配置 “hot” Vs “inline”</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#“entry”-String-Vs-Array-Vs-Object"><span class="nav-number">1.4.</span> <span class="nav-text">“entry” - String Vs Array Vs Object</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#entry-Array"><span class="nav-number">1.4.1.</span> <span class="nav-text">entry - Array</span></a></li></ol></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">listen</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
